Example documentation: https://developer.github.com/v3/
[[#Routes][Routes]]
[[#User_Authentication][User Authentication]]
[[Clients]]
[[Patients]]
[[Schedules]]
[[Contacts]]
* Routes
*** All routes that are interfaced primarily through JSON should be scoped to an /api/ route.
*** Protected routes
Any route that is protected, will need to include a JWT in the header

The header needs to follow the format:

"Authorization": "Bearer " + JWT

Example:

#+BEGIN_SRC
"Authorization": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9"
#+END_SRC

* User Authentication
** POST | Unprotected | '/api/signup'
*** Request: 

#+BEGIN_SRC javascript

{
    "user": 
        { 
            "name": "User McUser",
            "email": "user@example.com",
            "password": "bazfoobar",
            "password_confirmation": "bazfoobar" 
        }
}
#+END_SRC

*** Response:

HTTP Status: 201

Success: 
#+BEGIN_SRC javascript
{"success": "true"}
#+END_SRC

Failure:

HTTP Status: 5XX

#+BEGIN_SRC javascript
{
    "success": "false"
    "errors": [....] // a list of errors with the request
}
#+END_SRC

** POST | Unprotected | '/api/user_token' or '/api/login'
*** Request: 

#+BEGIN_SRC javascript
{ "user": 
    {
        "email": "some email",
        "password": "some password"
    }
}
#+END_SRC

*** Response:
Success:
HTTP Status: 201

#+BEGIN_SRC javascript
{"jwt": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9"}
#+END_SRC

Failure:
HTTP Status 404
* Clients
** POST | Protected | '/api/client'
*** Request: 
Success:

HTTP Status 200
#+BEGIN_SRC javascript

{
    "success": true,
    "client": 
        {
        "firstName": "Justin"
        "lastName": "Barclay"
        "address": "116 St & 85 Ave, Edmonton, AB T6G 2R3"
        "phoneNumber": "7805555555"
        "email": "fakejustin@ualberta.ca"
        "licos": "123456"
        "socialAssistance": "76543"
        "pets": "12404"
        "alternativeContactFirstName": "John"
        "alternativeContactLastName": "Wick"
        "alternativeContactPhoneNumber": "17809904957"
        "alternativeContactAddress": "1234 Fake St & 96 Ave, Edmonton, AB T8G 2EF"
        "notes": "His dog is super bitey"
        "alternativeContact2ndPhone": "7804737373"
        }
}

#+END_SRC

Failure:
HTTP Status 404
#+BEGIN_SRC
{ 
    "success": false,
    "errors": [....] // list of errors
}
#+END_SRC
** GET | Protected | '/api/client/{id}'
*** Request: 
Success:

HTTP Status 200
#+BEGIN_SRC javascript

{
    "success": true,
    "client": 
        {
        "firstName": "Justin"
        "lastName": "Barclay"
        "address": "116 St & 85 Ave, Edmonton, AB T6G 2R3"
        "phoneNumber": "7805555555"
        "email": "fakejustin@ualberta.ca"
        "licos": "123456"
        "socialAssistance": "76543"
        "pets": "12404"
        }
}

#+END_SRC

Failure:
HTTP Status 404
** GET | Protected | '/api/client/{id}'
*** Request: 
Success:

HTTP Status 200
#+BEGIN_SRC javascript

{
    "success": true,
    "client": 
        {
        "firstName": "Justin"
        "lastName": "Barclay"
        "address": "116 St & 85 Ave, Edmonton, AB T6G 2R3"
        "phoneNumber": "7805555555"
        "email": "fakejustin@ualberta.ca"
        "licos": "123456"
        "socialAssistance": "76543"
        "pets": "12404"
        }
}

#+END_SRC

Failure:
HTTP Status 404
#+BEGIN_SRC
{ 
    "success": false,
    "errors": [....] // list of errors
}
#+END_SRC
* Patients
** POST | Protected | '/api/patients'
*** Request: 

#+BEGIN_SRC javascript

{
    "patient": 
        { 
            "client": "client id",
            "species": "cat",
            "name": "Chairman Meow",
            "age": 17,
            "gender": "Male",
            "colour": "Red",
            "tattoo": 197265,
            "microchip": nil,
            "reproductive_status": "Spade"
        }
}
#+END_SRC

*** Response:

HTTP Status: 201

Success: 
#+BEGIN_SRC javascript
{"success": "true"}
#+END_SRC

Failure:
HTTP Status 5XX
#+BEGIN_SRC javascript
{
    "success": "false"
    "errors": [....] // a list of errors with the request
}
#+END_SRC
** GET | Protected | '/api/patients'
*** Request:
Success:

HTTP Status 200
#+BEGIN_SRC
{
  "success": "true"
  "patients": [ { "name": "Chairman Meow, "id": 1}...]
}
#+END_SRC
** GET | Protected | '/api/patients/{id}'
*** Request: 
Success:

HTTP Status 200
#+BEGIN_SRC javascript

{
    "success": true,
    "patient": 
        { 
            "client": "client id",
            "species": "cat",
            "name": "Chairman Meow",
            "age": 17,
            "gender": "Male",
            "colour": "Red",
            "tattoo": 197265,
            "microchip": nil,
            "reproductive_status": "Spade"
        }
}

#+END_SRC

Failure:
HTTP Status 404

#+BEGIN_SRC
{ 
    "success": false,
    "errors": [....] // list of errors
}
#+END_SRC
** POST | Protected | '/api/patients/{patient_id}/medical_records'
*** Request: 
#+BEGIN_SRC javascript
{
   "medical_record": {
        "patient_id": "integer",
        "data": "datetime",
        "summary": "string"
        "signature": "text",
        "temperature": "float",
        "exam_notes": "text",
        "medications": "text",
        "eyes": "string",
        "oral": "string",
        "ears": "string",
        "glands": "string",
        "skin": "string",
        "abdomen": "string",
        "urogential": "string",
        "nervousSystem": "string",
        "musculoskeletal": "string",
        "cardiovascular": "string",
        "heart_rate": "integer",
        "respiratory": "string",
        "respiratory_rate": "integer",
        "attitudeBAR": "Boolean",
        "attitudeQAR": "Boolean",
        "attitudeDepressed": "Boolean",
        "eyesN": "Boolean",
        "eyesA": "Boolean",
        "mmN": "Boolean",
        "mmPale": "Boolean",
        "mmJaundiced": "Boolean",
        "mmTacky": "Boolean",
        "earsN": "Boolean",
        "earsA": "Boolean",
        "earsEarMites": "Boolean",
        "earsAU": "Boolean",
        "earsAD": "Boolean",
        "earsAS": "Boolean",
        "glandsN": "Boolean",
        "glandsA": "Boolean",
        "skinN": "Boolean",
        "skinA": "Boolean",
        "abdomenN": "Boolean",
        "abdomenA": "Boolean",
        "urogentialN": "Boolean",
        "urogentialA": "Boolean",
        "nervousSystemN": "Boolean",
        "nervousSystemA": "Boolean",
        "musculoskeletalN": "Boolean",
        "musculoskeletalA": "Boolean",
        "cardiovascularN": "Boolean",
        "cardiovascularA": "Boolean",
        "respiratoryN": "Boolean",
        "respiratoryA": "Boolean"
    }
}

#+END_SRC
Success:

HTTP Status 201
#+BEGIN_SRC
{
  "success": "true"
}
#+END_SRC
Failure:

HTTP Status 500
#+BEGIN_SRC
{ 
    "success": false,
    "errors": [....] // list of errors
}
#+END_SRC
** GET | Protected | '/api/patients/{patient_id}/medical_records/{id}'
*** Request:
Success:

HTTP Status 200
#+BEGIN_SRC
{
    "success": "true",
    "medical_record": {
        "patient_id": "integer",
        "data": "datetime",
        "summary": "string"
        "signature": "text",
        "temperature": "float",
        "exam_notes": "text",
        "medications": "text",
        "eyes": "string",
        "oral": "string",
        "ears": "string",
        "glands": "string",
        "skin": "string",
        "abdomen": "string",
        "urogential": "string",
        "nervousSystem": "string",
        "musculoskeletal": "string",
        "cardiovascular": "string",
        "heart_rate": "integer",
        "respiratory": "string",
        "respiratory_rate": "integer",
        "attitudeBAR": "Boolean",
        "attitudeQAR": "Boolean",
        "attitudeDepressed": "Boolean",
        "eyesN": "Boolean",
        "eyesA": "Boolean",
        "mmN": "Boolean",
        "mmPale": "Boolean",
        "mmJaundiced": "Boolean",
        "mmTacky": "Boolean",
        "earsN": "Boolean",
        "earsA": "Boolean",
        "earsEarMites": "Boolean",
        "earsAU": "Boolean",
        "earsAD": "Boolean",
        "earsAS": "Boolean",
        "glandsN": "Boolean",
        "glandsA": "Boolean",
        "skinN": "Boolean",
        "skinA": "Boolean",
        "abdomenN": "Boolean",
        "abdomenA": "Boolean",
        "urogentialN": "Boolean",
        "urogentialA": "Boolean",
        "nervousSystemN": "Boolean",
        "nervousSystemA": "Boolean",
        "musculoskeletalN": "Boolean",
        "musculoskeletalA": "Boolean",
        "cardiovascularN": "Boolean",
        "cardiovascularA": "Boolean",
        "respiratoryN": "Boolean",
        "respiratoryA": "Boolean"
    }
}

#+END_SRC
Failure:
HTTP Status 404

#+BEGIN_SRC
{ 
    "success": false,
    "errors": [....] // list of errors
}
#+END_SRC
** GET | Protected | '/api/patients/{patient_id}/medical_records'
*** Request:
Success:

HTTP Status 200
#+BEGIN_SRC
{
    "success": "true",
    "medical_records": [{"id": integer, "notes": text}...]
}

#+END_SRC
** POST | Protected | '/api/patients/{patient_id}/medical_records/{medical_record_id}/notes'
*** Request: 
#+BEGIN_SRC javascript
{
   "note": {
      "medical_record_id": "integer",
      "body": "text",
      "initials": "string"
}

#+END_SRC
Success:

HTTP Status 201
#+BEGIN_SRC
{
  "success": "true"
}
#+END_SRC
Failure:

HTTP Status 500
#+BEGIN_SRC
{ 
    "success": false,
    "errors": [....] // list of errors
}
#+END_SRC

** GET | Protected | '/api/patients/{patient_id}/medical_records/{medical_record_id}/notes/{note_id}'

Success:

HTTP Status 200
#+BEGIN_SRC
{
  "success": "true"
  "note": {
      "medical_record_id": "integer",
      "body": "text",
      "initials": "string"
    }
}
#+END_SRC
Failure:

HTTP Status 404
#+BEGIN_SRC
{ 
    "success": false,
    "errors": "Not found"
}
#+END_SRC

** GET | Protected | '/api/patients/{patient_id}/medical_records/{medical_record_id}/notes'

Success:

HTTP Status 200
#+BEGIN_SRC
{
  "success": "true",
  "notes": [{"id": "integer", "date_created": "datetime"}...]
}
#+END_SRC

________

* Schedules
** POST | Protected | '/api/schedules'
NOTE: appointmentDate must be in unix epoch time. Duration is the length of the appointment in minutes

#+BEGIN_SRC javascript
{schedule: { appointmentStartDate: '1489077477',
             clientId: @client.id,
             reason: 'bitey dog',
             notes: '', 
             location: '1234 fake st', 
             appointmentEndDate: '1489077477'}}

#+END_SRC
Success:
HTTP Status 201
#+BEGIN_SRC
{
  "success": "true"
}
#+END_SRC

Failure: All codes besides 201 (5XX, or 200)

#+BEGIN_SRC
{
  "success": "false",
  "errors":["Reason can't be blank","Location can't be blank","Duration can't be blank", ... ect]}
}
#+END_SRC

** GET | Protected | '/api/schedules'
Note: Dates must be unix time
*** Request: 
Success:

HTTP Status 200
#+BEGIN_SRC javascript
{
  "success": "boolean",
  "schedule": [{"id": "integer", "appointmentStartDate": "datetime", "appointmentEndDate": "datetime"}...]
}
#+END_SRC

Failure:
HTTP Status 404
#+BEGIN_SRC
{ 
    "success": false
}
#+END_SRC

** GET | Protected | '/api/schedules/{id}'
*** Request: 
Success:

HTTP Status 200
#+BEGIN_SRC javascript
{
    "schedule": { 
         "appointmentStartDate": "1489077477",
         "clientId": "1324",
         "reason": "bitey dog",
         "notes": "", 
         "location": "1234 fake st",
         "appointmentEndDate": "1489083859"
          }
}
#+END_SRC

Failure:
HTTP Status 404
#+BEGIN_SRC
{ 
    "success": false,
    "errors": [....] // list of errors
}
#+END_SRC

* Contacts
** GET | Protected | '/api/contacts'
*** Request:
Success:

HTTP Status 200
#+BEGIN_SRC
{
  "success": "true"
  "patients": [ { "first_name": "Justin", "last_name": "Barclay", "id": 1}...]
}
#+END_SRC
** POST | Protected | '/api/contacts'
*** Request: 
Please note that contact_type must be one of the following strings "Veterinarian", "Volunteer", "Laboratory"
#+BEGIN_SRC javascript
{
  "contact": 
   {
     "first_name": "Justin" 
     "last_name": "Barclay",
     "address": "116 St & 85 Ave, Edmonton, AB T6G 2R3",
     "email": "fakejustin@ualberta.ca",
     "phone_number": "555-555-5555",
     "fax_number": "555-555-5556",
     "contact_type": "Veterinarian"
   }
}

#+END_SRC
Success:

HTTP Status 201
#+BEGIN_SRC
{
  "success": "true"
}
#+END_SRC
Failure:
HTTP Status 500

#+BEGIN_SRC
{ 
    "success": false,
    "errors": [....] // list of errors
}
#+END_SRC
** GET | Protected | '/api/contacts/{id}'
*** Request:
Success:

HTTP Status 200
#+BEGIN_SRC
{
  "success": "true"
  "contact": 
   {
     "first_name": "Justin",
     "last_name": "Barclay"
     "address": "116 St & 85 Ave, Edmonton, AB T6G 2R3",
     "email": "fakejustin@ualberta.ca",
     "phone_number": "555-555-5555",
     "fax_number": "555-555-5556",
     "contact_type": "Veterinarian"
   }
}
#+END_SRC
Failure:
HTTP Status 404

#+BEGIN_SRC
{ 
    "success": false,
    "errors": [....] // list of errors
}
#+END_SRC
